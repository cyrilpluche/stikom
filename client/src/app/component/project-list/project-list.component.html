<div class="container">

  <div class="row row-first" *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'">
    <div class="col">
      <button type="button" class="btn btn-outline-default waves-effect" [routerLink]="['/project-creation']"><h6 class="no-margin-bottom"><i class="fa fa-plus mr-3"></i>New Project</h6></button>
    </div>
  </div>
  <!-- Error alert -->
  <div *ngIf="errorMessage" class="row row-first justify-content-end error-text">
    <i>{{errorMessage}}</i>
  </div>

  <!-- Project not started -->
  <div class="row row-first justify-content-between">
    <div class="col">
      <a data-toggle="collapse" data-target="#projects_1" aria-expanded="false" aria-controls="projects_1">
        <h5><span class="badge badge-primary">Project started</span></h5>
      </a>
    </div>
    <!-- SEARCH BAR -->
    <div *ngIf="projects_1.length != 0" class=" md-form" id="search-bar">
      <input id="search" (keyup)="search(1)" class="form-control" type="text" placeholder="Search" aria-label="Search">
    </div>
  </div>

  <div class="row" *ngIf="projects_1.length == 0">
    <div class="offset-1">
      No projects
    </div>
  </div>

  <!-- TABLE -->
  <div *ngIf="projects_1.length != 0" class="row justify-content-center collapse show" id="projects_1">

  <!--Table-->
    <table class="col-12 table hoverable table-borderless table-hover table-fixed" id="project-table">

      <!--Table head-->
      <thead class="">
      <tr class="text-white">
        <th style="width:5%;"></th>
        <th style="width:10%;"  (click)="sortTable(1, 1)"><a>Code</a></th>
        <th style="width:40%;" (click)="sortTable(2, 1)"><a>Title</a></th>
        <th style="width:20%;" (click)="sortTable(3, 1)"><a>Start Date</a></th>
        <th style="width:20%;" (click)="sortTable(4, 1)"><a>Finished Date</a></th>
        <th *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'" style="width:5%;"></th>
      </tr>
      </thead>
      <!--Table head-->

      <!--Table body-->
      <tbody>
      <tr *ngFor="let project of projects_1" (click)="selectProject(project)">
        <td scope="row">
          <a data-toggle="modal" data-target="#actionModal"><i class="fa fa-cog text-blue"></i></a>
        </td>
        <td>{{project.project_id}}</td>
        <td>{{textHelper.firstLetterUpperCase(project.project_title.substr(0,50))}}</td>
        <td>{{project.project_start | date:"MM/dd/yyyy"}}</td>
        <td>{{project.project_end | date:"MM/dd/yyyy"}}</td>
        <td *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'">
          <a data-toggle="modal" data-target="#warningModal"><i class="fa fa-close text-red"></i></a>
        </td>
      </tr>
      </tbody>
      <!--Table body-->

    </table>
    <!--Table-->

  </div>

  <!-- Project started -->
  <div class="row row-first justify-content-between">

    <div class="col">
      <a data-toggle="collapse" data-target="#projects_0" aria-expanded="true" aria-controls="projects_0">
        <h5><span class="badge badge-primary">Project not started</span></h5>
      </a>
    </div>

    <!-- SEARCH BAR -->
    <div *ngIf="projects_0.length != 0" class=" md-form" id="search-bar-2">
      <input id="search-2" (keyup)="search(2)" class="form-control" type="text" placeholder="Search" aria-label="Search">
    </div>
  </div>

  <div class="row" *ngIf="projects_0.length == 0">
    <div class="offset-1">
      No projects
    </div>
  </div>

  <!-- TABLE -->
  <div *ngIf="projects_0.length != 0" class="row justify-content-center collapse show" id="projects_0">

    <!--Table-->
    <table class="col-12 table hoverable table-borderless table-hover table-fixed" id="project-table-2">

      <!--Table head-->
      <thead class="">
      <tr class="text-white">
        <th style="width:5%;"></th>
        <th style="width:10%;"  (click)="sortTable(1, 2)"><a>Code</a></th>
        <th style="width:40%;" (click)="sortTable(2, 2)"><a>Title</a></th>
        <th style="width:20%;" (click)="sortTable(3, 2)"><a>Start Date</a></th>
        <th style="width:20%;" (click)="sortTable(4, 2)"><a>Finished Date</a></th>
        <th *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'" style="width:5%;"></th>
      </tr>
      </thead>
      <!--Table head-->

      <!--Table body-->
      <tbody>
      <tr *ngFor="let project of projects_0" (click)="selectProject(project)">
        <td scope="row">
          <a data-toggle="modal" data-target="#actionModal"><i class="fa fa-cog text-blue"></i></a>
        </td>
        <td>{{project.project_id}}</td>
        <td>{{textHelper.firstLetterUpperCase(project.project_title.substr(0,50))}}</td>
        <td>{{project.project_start | date:"MM/dd/yyyy"}}</td>
        <td>{{project.project_end | date:"MM/dd/yyyy"}}</td>
        <td *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'">
          <a data-toggle="modal" data-target="#warningModal"><i class="fa fa-close text-red"></i></a>
        </td>
      </tr>
      </tbody>
      <!--Table body-->

    </table>
    <!--Table-->

  </div>

  <!-- Project finished -->
  <div class="row row-first justify-content-between">

    <div class="col">
      <a data-toggle="collapse" data-target="#projects_2" aria-expanded="false" aria-controls="projects_2">
        <h5><span class="badge badge-primary">Project finished </span></h5>
      </a>
    </div>

    <!-- SEARCH BAR -->
    <div *ngIf="projects_2.length != 0" class="col md-form" id="search-bar-3">
      <input id="search-3" (keyup)="search(2)" class="form-control" type="text" placeholder="Search" aria-label="Search">
    </div>
  </div>

  <div class="row" *ngIf="projects_2.length == 0">
    <div class="offset-1">
      No projects
    </div>
  </div>

  <!-- TABLE -->
  <div *ngIf="projects_2.length != 0" class="row justify-content-center collapse show" id="projects_2">

    <!--Table-->
    <table class="col-12 table hoverable table-borderless table-hover table-fixed" id="project-table-3">

      <!--Table head-->
      <thead class="">
      <tr class="text-white">
        <th style="width:5%;"></th>
        <th style="width:10%;"  (click)="sortTable(1, 3)"><a>Code</a></th>
        <th style="width:40%;" (click)="sortTable(2, 3)"><a>Title</a></th>
        <th style="width:20%;" (click)="sortTable(3, 3)"><a>Start Date</a></th>
        <th style="width:20%;" (click)="sortTable(4, 3)"><a>Finished Date</a></th>
        <th *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'" style="width:5%;"></th>
      </tr>
      </thead>
      <!--Table head-->

      <!--Table body-->
      <tbody>
      <tr *ngFor="let project of projects_2" (click)="selectProject(project)">
        <td scope="row">
          <a data-toggle="modal" data-target="#actionModal"><i class="fa fa-cog text-blue"></i></a>
        </td>
        <td>{{project.project_id}}</td>
        <td>{{textHelper.firstLetterUpperCase(project.project_title.substr(0,50))}}</td>
        <td>{{project.project_start | date:"MM/dd/yyyy"}}</td>
        <td>{{project.project_end | date:"MM/dd/yyyy"}}</td>
        <td *ngIf="member_role != 'performer' && member_role != 'none' && member_role !='manager'">
          <a data-toggle="modal" data-target="#warningModal"><i class="fa fa-close text-red"></i></a>
        </td>
      </tr>
      </tbody>
      <!--Table body-->

    </table>
    <!--Table-->

  </div>

</div>

<app-action title={{project_selected.project_title}}
            text=""
            buttons={{buttonsTitles}}
            links={{buttonsLinks}}
            [isLinkActive]=true
>
</app-action>

<!-- Modal warning -->
<app-warning title="Delete Project {{project_selected.project_id}}"
             text="Are you sure you want to delete the Project : {{project_selected.project_title}} from the project list ? All data linked will be destroyed."
             link="project-list"
             (success)="deleteProject(project_selected.project_id)"
             [isLink]=false>
</app-warning>
